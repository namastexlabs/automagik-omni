# =================================================================
# üöÄ Automagik Omni - Environment Configuration
# =================================================================
# Multi-tenant omnichannel messaging hub
# Copy this file to .env and configure your values
# =================================================================

# =================================================================
# üîß Core API Settings (REQUIRED)
# =================================================================

# API Authentication - REQUIRED! Generate a secure random string
AUTOMAGIK_OMNI_API_KEY="your-secret-api-key-here"

# Gateway Port - Single entry point for all services
# This is the only port you need to configure
OMNI_PORT="8882"

# Legacy API Server Binding (used when not using Gateway mode)
AUTOMAGIK_OMNI_API_HOST="0.0.0.0"
AUTOMAGIK_OMNI_API_PORT="8882"

# CORS Configuration - Comma-separated list of allowed origins
# Use "*" for development, specific domains for production
AUTOMAGIK_OMNI_CORS_ORIGINS="http://localhost:3000,http://localhost:8888"

# Production Server URL (optional - for Swagger UI production mode)
# AUTOMAGIK_OMNI_PROD_SERVER_URL="https://api.example.com"

# =================================================================
# üåç Environment & Logging
# =================================================================

# Environment Mode: development | production
ENVIRONMENT="development"

# Logging Level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL="INFO"

# Log output verbosity: short | full
AUTOMAGIK_OMNI_LOG_VERBOSITY="short"

# Log folder for file outputs
LOG_FOLDER="./logs"

# Global timezone for message timestamps
AUTOMAGIK_TIMEZONE="UTC"

# =================================================================
# üóÑÔ∏è Database Configuration
# =================================================================

# SQLite (Default - Recommended for development)
AUTOMAGIK_OMNI_SQLITE_DATABASE_PATH="./data/automagik-omni.db"

# PostgreSQL (Optional - for production scale)
# Uncomment and configure for PostgreSQL:
# AUTOMAGIK_OMNI_DATABASE_URL="postgresql://user:password@localhost:5432/automagik_omni"

# =================================================================
# üìä Message Tracing
# =================================================================

# Enable message flow tracing
AUTOMAGIK_OMNI_ENABLE_TRACING="true"

# Trace retention period (days)
AUTOMAGIK_OMNI_TRACE_RETENTION_DAYS="30"

# Maximum payload size for traces (bytes)
AUTOMAGIK_OMNI_TRACE_MAX_PAYLOAD_SIZE="1048576"

# Include sensitive data in traces (NEVER enable in production!)
AUTOMAGIK_OMNI_TRACE_INCLUDE_SENSITIVE="false"

# =================================================================
# üì± WhatsApp Integration via Evolution API (Auto-Managed)
# =================================================================

# Evolution API is automatically managed by Omni - no configuration needed!
#
# How it works:
# 1. Evolution API instances are auto-discovered via Omni dashboard
# 2. API keys are auto-generated per instance (transparent to user)
# 3. All keys are displayed in the Manage tab with show/hide toggle
# 4. Bootstrap key (used for initial instance discovery):
EVOLUTION_API_KEY="429683C4C977415CAAFCCE10F7D57E11"

# Evolution API Logging (optional - defaults to ERROR,WARN)
EVOLUTION_LOG_LEVEL="ERROR,WARN"

# NOTE: Evolution API port is auto-managed by Gateway (range 18901-18919)
# Evolution URL defaults to http://localhost:18082 but can be overridden if needed:
# EVOLUTION_URL="http://your-evolution-server:18082"

# =================================================================
# üé® UI Configuration (Frontend Dashboard)
# =================================================================

# NOTE: UI port is auto-managed by Gateway in dev mode (range 19881-19899)
# In production mode, UI is served as static files through the Gateway.
#
# API keys for each WhatsApp instance are now displayed directly in the
# Evolution Management tab of the dashboard with show/hide toggle.
